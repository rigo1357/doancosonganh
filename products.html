<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>T·∫•t c·∫£ s·∫£n ph·∫©m - PPTLaptop</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
    <div class="container header-inner">
      <div class="brand">
        <div class="logo" style="padding:0;overflow:hidden;display:flex;align-items:center;justify-content:center">
          <a href="index.html" style="display:block;width:100%;height:100%">
            <img src="Image/Logo.jpg" alt="Logo PPTLaptop" style="width:100%;height:100%;object-fit:contain;" />
          </a>
        </div>
        <div>
          <div class="brand-title">PPTStore</div>
          <div class="brand-sub">Mua laptop - giao t·∫≠n n∆°i</div>
        </div>
      </div>

      <nav class="nav">
        <a href="index.html">Trang ch·ªß</a>
        <div class="dropdown">
          <a href="products.html" class="dropdown-toggle active">S·∫£n ph·∫©m</a>
          <div class="dropdown-menu mega-menu">
            <div class="mega-col">
              <div class="mega-title">Laptop Dell</div>
              <a href="#">Dell Alienware</a>
              <a href="#">Dell Precision</a>
              <a href="#">Dell XPS</a>
              <a href="#">Dell Vostro</a>
              <a href="#">Dell Inspiron</a>
              <a href="#">Dell Latitude</a>
              <a href="#">Dell G-Seri</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop Acer</div>
              <a href="#">Acer Aspire</a>
              <a href="#">Acer Nitro</a>
              <a href="#">Acer Spin</a>
              <a href="#">Acer Predator</a>
              <a href="#">Acer Swift</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop Asus</div>
              <a href="#">Asus Tuf</a>
              <a href="#">Asus ZenBook</a>
              <a href="#">Asus VivoBook</a>
              <a href="#">Asus Rog</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop Lenovo</div>
              <a href="#">Lenovo Ideapad</a>
              <a href="#">Lenovo ThinkBook</a>
              <a href="#">Lenovo Yoga</a>
              <a href="#">Lenovo Legion</a>
              <a href="#">Lenovo Thinkpad</a>
              <a href="#">Lenovo LOQ</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop HP</div>
              <a href="#">HP Elitebook</a>
              <a href="#">HP Spectre</a>
              <a href="#">HP Pavilion</a>
              <a href="#">HP Probook</a>
              <a href="#">HP Omen</a>
              <a href="#">HP Envy</a>
              <a href="#">HP Zbook</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop MSI</div>
              <a href="#">MSI G-Seri</a>
              <a href="#">MSI Bravo</a>
              <a href="#">MSI Modern</a>
            </div>
          </div>
        </div>
        <a href="contact.html">Li√™n h·ªá</a>
        <a href="Login.html" id="login-link">ƒêƒÉng nh·∫≠p/ƒêƒÉng k√Ω</a>
        <span id="user-info" class="user-info"></span>
        <a href="cart.html">üõí Gi·ªè (<span id="cart-count">0</span>)</a>
        <a href="#" id="logout-link" class="logout">ƒêƒÉng xu·∫•t</a>
      </nav>
    </div>
  </header>

<main class="container">
  <h2 class="section-title">Danh s√°ch s·∫£n ph·∫©m</h2>
  <p class="text-muted">Ch·ªçn l·ªçc c√°c m·∫´u laptop m·ªõi nh·∫•t, gi√° t·ªët t·∫°i PPTLaptop</p>

    <div class="controls" style="flex-wrap:wrap;gap:12px;align-items:center;display:flex;">
      <select id="filter-brand" class="select">
        <option value="">T·∫•t c·∫£ h√£ng</option>
      </select>

      <select id="sort" class="select">
        <option value="default">S·∫Øp x·∫øp</option>
        <option value="price-asc">Gi√°: Th·∫•p ‚Üí Cao</option>
        <option value="price-desc">Gi√°: Cao ‚Üí Th·∫•p</option>
      </select>

      <div style="display:flex;align-items:center;gap:8px;min-width:220px;">
        <label for="price-range" style="font-size:14px;color:#555">Gi√°:</label>
        <span id="price-min-label">0</span>
        <input type="range" id="price-range" min="0" max="100000000" step="500000" value="0" style="flex:1" />
        <span id="price-max-label">100tr+</span>
      </div>

      <input id="q" class="input" placeholder="T√¨m ki·∫øm..." style="flex:1" />
      <button class="btn" id="apply-filter">√Åp d·ª•ng</button>
    </div>

    <div class="grid" id="all-products"></div>
  </main>


  <footer>
    <div class="footer-main">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h6>PPTLaptop</h6>
            <p>ƒê·ªãa ch·ªâ: 06 Tr·∫ßn VƒÉn ∆†n, Ph√∫ Ho√†, Th·ªß D·∫ßu M·ªôt, B√¨nh D∆∞∆°ng, Vi·ªát Nam</p>
            <p>Hotline: 0971 476 878</p>
            <p>Email: pptlaptop@gmail.com</p>
            <div style="margin-top:8px">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3918.996246850356!2d106.6747335!3d10.979613!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3174d1276f4b7577%3A0x54075879a0f2301!2s06%20Tr%E1%BA%A7n%20V%C4%83n%20%C6%A0n%2C%20Ph%C3%BA%20Ho%C3%A0%2C%20Th%E1%BB%A7%20D%E1%BA%A7u%20M%E1%BB%99t%2C%20B%C3%ACnh%20D%C6%B0%C6%A1ng%2C%20Vi%E1%BB%87t%20Nam!5e0!3m2!1svi!2s!4v1727111111111!5m2!1svi!2s"
                width="250"
                height="180"
                style="border:0;border-radius:8px;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </div>
          </div>
          <div class="footer-section">
            <h6>TH√îNG TIN C√îNG TY</h6>
            <ul>
              <li><a href="#">Gi·ªõi thi·ªáu c√¥ng ty</a></li>
              <li><a href="#">Tuy·ªÉn d·ª•ng</a></li>
              <li><a href="tel:0971476878">G·ª≠i g√≥p √Ω, khi·∫øu n·∫°i</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h6>CH√çNH S√ÅCH C√îNG TY</h6>
            <ul>
              <li><a href="#">Ch√≠nh s√°ch ch·∫•t l∆∞·ª£ng</a></li>
              <li><a href="#">Ch√≠nh s√°ch b·∫£o h√†nh</a></li>
              <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">
        <p>&copy; 2025 PPTLaptop. All Rights Reserved</p>
      </div>
    </div>
  </footer>



  <script type="module">
    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè
    function updateCartCount(){
      let cart = JSON.parse(localStorage.getItem('cart') || '[]');
      let count = cart.reduce((sum, item) => sum + (item.qty || 1), 0);
      document.getElementById('cart-count').innerText = count;
    }

    updateCartCount();
    window.addEventListener('storage', updateCartCount);
    import { products } from './products.js';

    const container = document.getElementById('all-products');
    const brandSelect = document.getElementById('filter-brand');
    const sortSelect = document.getElementById('sort');
    const qInput = document.getElementById('q');
  const priceRange = document.getElementById('price-range');
  const priceMinLabel = document.getElementById('price-min-label');
  const priceMaxLabel = document.getElementById('price-max-label');

    function money(v){ return v.toLocaleString('vi-VN') + ' ‚Ç´'; }

    function populateBrands(){
      const brands = Array.from(new Set(products.map(p=>p.brand)));
      brands.forEach(b=>{
        const opt = document.createElement('option'); opt.value=b; opt.innerText=b;
        brandSelect.appendChild(opt);
      });
    }

    function render(list){
      container.innerHTML = '';
      list.forEach(p=>{
        let finalPrice = p.price;
        let badge = '';
        if(p.discount > 0){
          finalPrice = Math.round(p.price * (100 - p.discount) / 100);
          badge += `<span class="badge discount">-${p.discount}%</span>`;
        }
        if(p.stock === 0){
          badge += `<span class="badge out">H·∫øt h√†ng</span>`;
        }

          const c = document.createElement('div'); 
          c.className='card';
          c.innerHTML = `
            <div class="img-wrap">
              <img src="${p.img}" alt="${p.name}" />
              <div class="badges">${badge}</div>
            </div>
            <div class="title">${p.name}</div>
            <div class="desc">${p.desc} <span class="small text-muted">(${p.brand})</span></div>
            <div style="font-size:13px;color:#555;margin-top:2px">${p.desc}</div>
            <div class="price-row">
              <div class="price">
                ${p.discount > 0 ? `<span class="old-price">${money(p.price)}</span> ${money(finalPrice)}` : money(p.price)}
              </div>
              <div>
                <button class="btn secondary" onclick="view(${p.id})">Xem</button>
                <button class="btn" onclick="add(${p.id})" ${p.stock===0?'disabled':''}>Th√™m</button>
              </div>
            </div>
          `;
        container.appendChild(c);
      });
    }

    function applyFilters(){
      let list = products.slice();
      const brand = brandSelect.value;
      const q = qInput.value.trim().toLowerCase();
  const min = 0;
  const max = parseInt(priceRange.value) || 0;

  if(brand) list = list.filter(p=>p.brand===brand);
  if(q) list = list.filter(p=> (p.name + ' ' + p.desc).toLowerCase().includes(q));
  if(max > 0) list = list.filter(p=> p.price <= max);

      const sort = sortSelect.value;
      if(sort === 'price-asc') list.sort((a,b)=>a.price-b.price);
      if(sort === 'price-desc') list.sort((a,b)=>b.price-a.price);

      render(list);
    }

    function add(id){

      let cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const p = products.find(x=>x.id===id);
      cart.push({...p, qty:1});
      localStorage.setItem('cart', JSON.stringify(cart));
      alert('ƒê√£ th√™m: ' + p.name);
    }

    function view(id){ window.location.href = 'product-detail.html?id=' + id; }

    // ƒê∆∞a c√°c h√†m ra window ƒë·ªÉ HTML g·ªçi ƒë∆∞·ª£c
    window.add = add;
    window.view = view;

  document.getElementById('apply-filter').addEventListener('click', applyFilters);

  // L·ªçc s·∫£n ph·∫©m theo t√™n khi nh·∫≠p v√†o √¥ t√¨m ki·∫øm
  qInput.addEventListener('input', applyFilters);

  // L·ªçc s·∫£n ph·∫©m khi thay ƒë·ªïi gi√° ti·ªÅn
  priceRange.addEventListener('input', function(){
    let v = parseInt(priceRange.value) || 0;
    priceMaxLabel.innerText = v > 0 ? v.toLocaleString('vi-VN') + ' ‚Ç´' : '100tr+';
    applyFilters();
  });

  // Kh·ªüi t·∫°o nh√£n gi√°
  priceMinLabel.innerText = '0';
  priceMaxLabel.innerText = '100tr+';

  populateBrands();
  render(products);
  </script>

</body>
</html>
