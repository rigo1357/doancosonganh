<!doctype html>
<html lang="vi">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Chi ti·∫øt s·∫£n ph·∫©m - PPTLaptop</title><link rel="stylesheet" href="style.css"></head>
<body>
      <header class="header">
    <div class="container header-inner">
      <div class="brand">
        <div class="logo" style="padding:0;overflow:hidden;display:flex;align-items:center;justify-content:center">
          <a href="index.html" style="display:block;width:100%;height:100%">
            <img src="Image/Logo.jpg" alt="Logo PPTLaptop" style="width:100%;height:100%;object-fit:contain;" />
          </a>
        </div>
        <div>
          <div class="brand-title">PPTStore</div>
          <div class="brand-sub">Mua laptop - giao t·∫≠n n∆°i</div>
        </div>
      </div>

      <nav class="nav">
        <a href="index.html" class="active">Trang ch·ªß</a>
        <div class="dropdown">
          <a href="products.html" class="dropdown-toggle">S·∫£n ph·∫©m</a>
          <div class="dropdown-menu mega-menu">
            <div class="mega-col">
              <div class="mega-title">Laptop Dell</div>
              <a href="#">Dell Alienware</a>
              <a href="#">Dell Precision</a>
              <a href="#">Dell XPS</a>
              <a href="#">Dell Vostro</a>
              <a href="#">Dell Inspiron</a>
              <a href="#">Dell Latitude</a>
              <a href="#">Dell G-Seri</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop Acer</div>
              <a href="#">Acer Aspire</a>
              <a href="#">Acer Nitro</a>
              <a href="#">Acer Spin</a>
              <a href="#">Acer Predator</a>
              <a href="#">Acer Swift</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop Asus</div>
              <a href="#">Asus Tuf</a>
              <a href="#">Asus ZenBook</a>
              <a href="#">Asus VivoBook</a>
              <a href="#">Asus Rog</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop Lenovo</div>
              <a href="#">Lenovo Ideapad</a>
              <a href="#">Lenovo ThinkBook</a>
              <a href="#">Lenovo Yoga</a>
              <a href="#">Lenovo Legion</a>
              <a href="#">Lenovo Thinkpad</a>
              <a href="#">Lenovo LOQ</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop HP</div>
              <a href="#">HP Elitebook</a>
              <a href="#">HP Spectre</a>
              <a href="#">HP Pavilion</a>
              <a href="#">HP Probook</a>
              <a href="#">HP Omen</a>
              <a href="#">HP Envy</a>
              <a href="#">HP Zbook</a>
            </div>
            <div class="mega-col">
              <div class="mega-title">Laptop MSI</div>
              <a href="#">MSI G-Seri</a>
              <a href="#">MSI Bravo</a>
              <a href="#">MSI Modern</a>
            </div>
          </div>
        </div>
        <a href="contact.html">Li√™n h·ªá</a>
        <a href="Login.html" id="login-link">ƒêƒÉng nh·∫≠p/ƒêƒÉng k√Ω</a>
        <span id="user-info" class="user-info"></span>
        <a href="cart.html">üõí Gi·ªè (<span id="cart-count">0</span>)</a>
        <a href="#" id="logout-link" class="logout">ƒêƒÉng xu·∫•t</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div id="product-area"></div>

    <h4>S·∫£n ph·∫©m li√™n quan</h4>
    <div class="grid" id="related"></div>
  </main>


  <footer>
    <div class="footer-main">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h6>PPTLaptop</h6>
            <p>ƒê·ªãa ch·ªâ: 06 Tr·∫ßn VƒÉn ∆†n, Ph√∫ Ho√†, Th·ªß D·∫ßu M·ªôt, B√¨nh D∆∞∆°ng, Vi·ªát Nam</p>
            <p>Hotline: 0971 476 878</p>
            <p>Email: pptlaptop@gmail.com</p>
            <div style="margin-top:8px">
              <iframe
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3918.996246850356!2d106.6747335!3d10.979613!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3174d1276f4b7577%3A0x54075879a0f2301!2s06%20Tr%E1%BA%A7n%20V%C4%83n%20%C6%A0n%2C%20Ph%C3%BA%20Ho%C3%A0%2C%20Th%E1%BB%A7%20D%E1%BA%A7u%20M%E1%BB%99t%2C%20B%C3%ACnh%20D%C6%B0%C6%A1ng%2C%20Vi%E1%BB%87t%20Nam!5e0!3m2!1svi!2s!4v1727111111111!5m2!1svi!2s"
                width="250"
                height="180"
                style="border:0;border-radius:8px;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </div>
          </div>
          <div class="footer-section">
            <h6>TH√îNG TIN C√îNG TY</h6>
            <ul>
              <li><a href="#">Gi·ªõi thi·ªáu c√¥ng ty</a></li>
              <li><a href="#">Tuy·ªÉn d·ª•ng</a></li>
              <li><a href="tel:0971476878">G·ª≠i g√≥p √Ω, khi·∫øu n·∫°i</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h6>CH√çNH S√ÅCH C√îNG TY</h6>
            <ul>
              <li><a href="#">Ch√≠nh s√°ch ch·∫•t l∆∞·ª£ng</a></li>
              <li><a href="#">Ch√≠nh s√°ch b·∫£o h√†nh</a></li>
              <li><a href="#">Ch√≠nh s√°ch ƒë·ªïi tr·∫£</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <div class="container">
        <p>&copy; 2025 PPTLaptop. All Rights Reserved</p>
      </div>
    </div>
  </footer>


<script type="module">
    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè
    function updateCartCount(){
      let cart = JSON.parse(localStorage.getItem('cart') || '[]');
      let count = cart.reduce((sum, item) => sum + (item.qty || 1), 0);
      document.getElementById('cart-count').innerText = count;
    }

    updateCartCount();
    window.addEventListener('storage', updateCartCount);
  import { products } from './products.js';

  function money(v){ return v.toLocaleString('vi-VN') + ' ‚Ç´'; }

  const params = new URLSearchParams(location.search);
  const id = parseInt(params.get('id')) || 1;
  const p = products.find(x=>x.id===id) || products[0];

  let finalPrice = p.price;
  let badge = '';
  if(p.discount > 0){
    finalPrice = Math.round(p.price * (100 - p.discount) / 100);
    badge += `<span class="badge discount">-${p.discount}%</span>`;
  }
  if(p.stock === 0){
    badge += `<span class="badge out">H·∫øt h√†ng</span>`;
  }

  const area = document.getElementById('product-area');
  area.innerHTML = `
    <div class="detail">
      <div class="gallery">
        <img id="main-img" src="${p.img}" alt="${p.name}" class="main-img"/>
        <div class="thumbs">
          ${p.imgs && p.imgs.length ? p.imgs.map(im=>`<img class="thumb" src="${im}" onclick="document.getElementById('main-img').src=this.src">`).join('') : ''}
        </div>
        <div class="badges">${badge}</div>
      </div>
      <div>
        <h2>${p.name}</h2>
        <div class="small text-muted">${p.brand} ‚Ä¢ ${p.desc}</div>
        <div class="price">
          ${p.discount > 0 ? `<span class="old-price">${money(p.price)}</span> ${money(finalPrice)}` : money(p.price)}
        </div>
        <div style="margin: 12px 0 8px 0; display: flex; align-items: center; gap: 10px;">
          <label for="qty" style="font-size:15px;">S·ªë l∆∞·ª£ng:</label>
          <input id="qty" type="number" min="1" max="${p.stock}" value="1" style="width:60px;padding:6px 8px;border-radius:6px;border:1px solid #ccc;" ${p.stock===0?'disabled':''} />
          <span style="color:#888;font-size:13px;">${p.stock > 0 ? `(C√≤n ${p.stock} s·∫£n ph·∫©m)` : '(H·∫øt h√†ng)'}</span>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn" id="add-cart" ${p.stock===0?'disabled':''}>Th√™m v√†o gi·ªè</button>
          <button class="btn secondary" onclick="location.href='contact.html'">H·ªèi d·ªãch v·ª•</button>
        </div>
      </div>
    </div>
  `;

  document.getElementById('add-cart')?.addEventListener('click', ()=>{
    const qtyInput = document.getElementById('qty');
    let qty = parseInt(qtyInput?.value) || 1;
    if (qty < 1) qty = 1;
    if (qty > p.stock) qty = p.stock;
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    // N·∫øu ƒë√£ c√≥ s·∫£n ph·∫©m th√¨ tƒÉng s·ªë l∆∞·ª£ng
    let found = cart.find(x=>x.id===p.id);
    if(found) found.qty = (found.qty||1) + qty;
    else cart.push({...p, qty});
    localStorage.setItem('cart', JSON.stringify(cart));
    alert('ƒê√£ th√™m ' + qty + ' x ' + p.name);
  });

  // S·∫£n ph·∫©m li√™n quan
  const related = products.filter(x=>x.brand === p.brand && x.id !== p.id).slice(0,4);
  const relDiv = document.getElementById('related');
  related.forEach(r=>{
    const c = document.createElement('div'); c.className='card';
    c.innerHTML = `
      <img src="${r.img}" />
      <div class="title">${r.name}</div>
      <div class="price">${money(r.price)}</div>
      <button class="btn secondary" onclick="location.href='product-detail.html?id=${r.id}'">Xem</button>
    `;
    relDiv.appendChild(c);
  });
</script>

</body>
</html>
